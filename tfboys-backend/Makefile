.PHONY: build test clean deploy

# æ„å»ºæ‰€æœ‰æœåŠ¡
build:
	@echo "ğŸ”¨ æ„å»ºç”¨æˆ·æœåŠ¡..."
	cd services/users && GOOS=linux GOARCH=amd64 CGO_ENABLED=0 go build -ldflags='-s -w' -o bootstrap main.go
	@echo "ğŸ”¨ æ„å»ºäº§å“æœåŠ¡..."
	cd services/products && GOOS=linux GOARCH=amd64 CGO_ENABLED=0 go build -ldflags='-s -w' -o bootstrap main.go

# è¿è¡Œæµ‹è¯•
test:
	go test ./...

# æ¸…ç†æ„å»ºæ–‡ä»¶
clean:
	find . -name "bootstrap" -delete
	find . -name "*.zip" -delete

# æœ¬åœ°æµ‹è¯•æ„å»º
build-local:
	cd services/users && go build -o bootstrap-local main.go
	cd services/products && go build -o bootstrap-local main.go
